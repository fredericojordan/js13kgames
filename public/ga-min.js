window.eb=function(v,w,x,y,z){function r(){requestAnimationFrame(r,c.canvas);if(void 0===c.J)t(),c.m(c.canvas,0);else{var a=Date.now(),b=a-c.ca;1E3<b&&(b=c.K);c.ca=a;for(c.A+=b;c.A>=c.K;)A(),t(),c.A-=c.K;c.m(c.canvas,c.A/c.K)}}function A(){function a(b){b.U=b.x;b.V=b.y;b.children&&0<b.children.length&&b.children.forEach(function(d){a(d)})}c.b.children.forEach(function(b){a(b)})}function t(){if(0<c.buttons.length){c.canvas.style.cursor="auto";for(var a=c.buttons.length-1;0<=a;a--){var b=c.buttons[a];
b.update(c.X,c.canvas);"over"!==b.state&&"down"!==b.state||b.b||(c.canvas.style.cursor="pointer")}}c.ha&&c.X.Ya();c.state&&!c.paused&&c.state();if(0!==c.qa.length)for(a=0;a<c.qa.length;a++)(0,c.qa[a])()}function m(a){a.x=0;a.y=0;a.yb=0;a.zb=0;a.width=0;a.height=0;a.Ra=1;a.Sa=1;a.C=.5;a.D=.5;a.rotation=0;a.visible=!0;a.parent=void 0;a.b=!1;a.Ua=!1;a.shadowColor="rgba(100, 100, 100, 0.5)";a.shadowOffsetX=3;a.shadowOffsetY=3;a.shadowBlur=3;a.ua=void 0;a.$=1;a.sa=void 0;a.$a=0;a.I=!1;a.Za=!1;a.U=void 0;
a.V=void 0;a.children=[];a.f=function(b){b.parent&&b.parent.removeChild(b);b.parent=a;a.children.push(b)};a.removeChild=function(b){if(b.parent===a)a.children.splice(a.children.indexOf(b),1);else throw Error(b+"is not a child of "+a);};a.vb=function(b,d){var f=a.children.indexOf(b),k=a.children.indexOf(d);if(-1!==f&&-1!==k)b.Ha=k,d.Ha=f,a.children[f]=d,a.children[k]=b;else throw Error(child+" Both objects must be a child of the caller "+a);};a.add=function(b){var d=Array.prototype.slice.call(arguments);
1<d.length?d.forEach(function(f){a.f(f)}):a.f(d[0])};a.remove=function(b){var d=Array.prototype.slice.call(arguments);1<d.length?d.forEach(function(f){a.removeChild(f)}):a.removeChild(d[0])};a.setPosition=function(b,d){a.x=b;a.y=d};a.nb=function(b,d,f){b.x=a.x+a.u-b.u+(d||0);b.y=a.y+a.s-b.s+(f||0);a.N(a,b)};a.qb=function(b,d,f){b.x=a.x+a.u-b.u+(d||0);b.y=a.y-b.height+(f||0);a.N(a,b)};a.pb=function(b,d,f){b.x=a.x+a.width+(d||0);b.y=a.y+a.s-b.s+(f||0);a.N(a,b)};a.mb=function(b,d,f){b.x=a.x+a.u-b.u+
(d||0);b.y=a.y+a.height+(f||0);a.N(a,b)};a.ob=function(b,d,f){b.x=a.x-b.width+(d||0);b.y=a.y+a.s-b.s+(f||0);a.N(a,b)};a.N=function(b,d){if(0!==d.parent.h||0!==d.parent.i)d.x-=b.h,d.y-=b.i};Object.defineProperties(a,{h:{get:function(){return this.parent?this.x+this.parent.h:this.x},enumerable:!0,configurable:!0},i:{get:function(){return this.parent?this.y+this.parent.i:this.y},enumerable:!0,configurable:!0},position:{get:function(){return{x:a.x,y:a.y}},enumerable:!0,configurable:!0},alpha:{get:function(){return a.parent.$*
a.$},set:function(b){a.$=b},enumerable:!0,configurable:!0},u:{get:function(){return a.width/2},enumerable:!0,configurable:!0},s:{get:function(){return a.height/2},enumerable:!0,configurable:!0},Ia:{get:function(){return a.I},set:function(b){!0===b&&!1===a.I&&(u(a),a.I=!0);!1===b&&!0===a.I&&(delete a.ea,delete a.R,a.I=!1)},enumerable:!0,configurable:!0},draggable:{get:function(){return a.sa},set:function(b){!0===b&&(c.g.push(a),a.sa=!0,!1===c.ha&&(c.ha=!0));!1===b&&c.g.splice(c.g.indexOf(a),1)},enumerable:!0,
configurable:!0},empty:{get:function(){return 0===a.children.length?!0:!1},enumerable:!0,configurable:!0}})}function u(a){Object.defineProperties(a,{ea:{get:function(){return a.width},set:function(b){a.width=b;a.height=b},enumerable:!0,configurable:!0},R:{get:function(){return a.width/2},set:function(b){a.width=2*b;a.height=2*b},enumerable:!0,configurable:!0}})}function B(a){a.c=a.c||void 0;a.release=a.release||void 0;a.ma=a.ma||void 0;a.la=a.la||void 0;a.H=a.H||void 0;a.state="up";a.action="";a.pressed=
!1;a.enabled=!0;a.W=!1;c.buttons.push(a);a.update=function(b){if(a.enabled){var d=c.X.ja(a);b.l&&(a.state="up","button"===a.oa&&a.show(0));d&&(a.state="over",a.frames&&3===a.frames.length&&"button"===a.oa&&a.show(1),b.j&&(a.state="down","button"===a.oa&&(3===a.frames.length?a.show(2):a.show(1))));"down"!==a.state||a.pressed||(a.c&&a.c(),a.pressed=!0,a.action="pressed");"over"===a.state&&(a.pressed&&(a.release&&a.release(),a.pressed=!1,a.action="released",c.X.Y&&a.H&&a.H()),a.W||(a.ma&&a.ma(),a.W=
!0));"up"===a.state&&(a.pressed&&(a.release&&a.release(),a.pressed=!1,a.action="released"),a.W&&(a.la&&a.la(),a.W=!1))}}}function q(a){var b={};b.code=a;b.j=!1;b.l=!0;b.c=void 0;b.release=void 0;b.fa=function(d){d.keyCode===b.code&&(b.l&&b.c&&b.c(),b.j=!0,b.l=!1);d.preventDefault()};b.Z=function(d){d.keyCode===b.code&&(b.j&&b.release&&b.release(),b.j=!1,b.l=!0);d.preventDefault()};window.addEventListener("keydown",b.fa.bind(b),!1);window.addEventListener("keyup",b.Z.bind(b),!1);return b}var c={};
c.canvas=document.createElement("canvas");c.canvas.setAttribute("width",1*v);c.canvas.setAttribute("height",1*w);c.canvas.style.backgroundColor="black";document.body.appendChild(c.canvas);c.canvas.da=c.canvas.getContext("2d");c.b=function(){var a={};m(a);a.b=!0;a.width=c.canvas.width;a.height=c.canvas.height;a.x=0;a.y=0;a.parent=void 0;return a}();c.X=function(){var a={L:0,M:0};Object.defineProperties(a,{x:{get:function(){return a.L/c.scale},enumerable:!0,configurable:!0},y:{get:function(){return a.M/
c.scale},enumerable:!0,configurable:!0},position:{get:function(){return{x:a.x,y:a.y}},enumerable:!0,configurable:!0}});a.j=!1;a.l=!0;a.Y=!1;a.ga=0;a.elapsedTime=0;a.c=void 0;a.release=void 0;a.H=void 0;a.O=null;a.wa=0;a.xa=0;a.Qa=function(b){a.L=b.pageX-b.target.offsetLeft;a.M=b.pageY-b.target.offsetTop;b.preventDefault()};a.Wa=function(b){a.L=b.targetTouches[0].pageX-c.canvas.offsetLeft;a.M=b.targetTouches[0].pageY-c.canvas.offsetTop;b.preventDefault()};a.fa=function(b){a.L=b.pageX-b.target.offsetLeft;
a.M=b.pageY-b.target.offsetTop;a.j=!0;a.l=!1;a.Y=!1;a.ga=Date.now();a.c&&a.c();b.preventDefault()};a.Xa=function(b){a.L=b.targetTouches[0].pageX-c.canvas.offsetLeft;a.M=b.targetTouches[0].pageY-c.canvas.offsetTop;a.j=!0;a.l=!1;a.Y=!1;a.ga=Date.now();a.c&&a.c();b.preventDefault()};a.Z=function(b){a.elapsedTime=Math.abs(a.ga-Date.now());200>=a.elapsedTime&&(a.Y=!0,a.H&&a.H());a.l=!0;a.j=!1;a.release&&a.release();b.preventDefault()};c.canvas.addEventListener("mousemove",a.Qa.bind(a),!1);c.canvas.addEventListener("mousedown",
a.fa.bind(a),!1);window.addEventListener("mouseup",a.Z.bind(a),!1);c.canvas.addEventListener("touchmove",a.Wa.bind(a),!1);c.canvas.addEventListener("touchstart",a.Xa.bind(a),!1);window.addEventListener("touchend",a.Z.bind(a),!1);c.canvas.style.touchAction="none";a.ja=function(b){if(b.Ia){var d=a.x-(b.h+b.u),f=a.y-(b.i+b.s);b=Math.sqrt(d*d+f*f)<b.R}else{d=b.h+b.width;f=b.i;var k=b.i+b.height;b=a.x>b.h&&a.x<d&&a.y>f&&a.y<k}return b};a.Ya=function(){if(a.j)if(null===a.O)for(var b=c.g.length-1;-1<b;b--){var d=
c.g[b];if(d.draggable&&a.ja(d)){a.wa=a.x-d.h;a.xa=a.y-d.i;a.O=d;b=d.parent.children;b.splice(b.indexOf(d),1);b.push(d);c.g.splice(c.g.indexOf(d),1);c.g.push(d);break}}else a.O.x=a.x-a.wa,a.O.y=a.y-a.xa;a.l&&(a.O=null);c.g.some(function(f){if(f.draggable&&a.ja(f))return c.canvas.style.cursor="pointer",!0;c.canvas.style.cursor="auto";return!1})};return a}();c.key=function(){var a={};a.hb=q(37);a.xb=q(38);a.sb=q(39);a.bb=q(40);a.ub=q(32);return a}();c.buttons=[];c.ha=!1;c.g=[];c.wb=[];c.state=void 0;
c.load=z||void 0;c.na=x||void 0;if(void 0===c.na)throw Error("Please supply the setup function in the constructor");c.ta=y||void 0;c.paused=!1;c.J=60;c.ca=Date.now();c.K=1E3/c.J;c.A=0;c.Na=!0;c.qa=[];c.scale=1;c.start=function(){c.ta?(c.a.Aa=function(){c.state=void 0;c.na()},c.a.load(c.ta),c.load&&(c.state=c.load)):c.na();r()};c.pause=function(){c.paused=!0};c.resume=function(){c.paused=!1};c.fb=function(){c.canvas.style.cursor="none"};c.tb=function(){c.canvas.style.cursor="auto"};Object.defineProperties(c,
{ia:{get:function(){return c.J},set:function(a){c.J=a;c.ca=Date.now();c.K=1E3/c.J},enumerable:!0,configurable:!0},backgroundColor:{set:function(a){c.canvas.style.backgroundColor=a},enumerable:!0,configurable:!0}});c.remove=function(a){var b=Array.prototype.slice.call(arguments);if(b[0]instanceof Array){if(b=b[0],0<b.length)for(var d=b.length-1;0<=d;d--){var f=b[d];f.parent.removeChild(f);b.splice(b.indexOf(f),1)}}else 1<b.length?b.forEach(function(k){k.parent.removeChild(k)}):b[0].parent.removeChild(b[0])};
c.group=function(a){var b={};m(b);b.f=function(d){d.parent&&d.parent.removeChild(d);d.parent=b;b.children.push(d);b.va()};b.removeChild=function(d){if(d.parent===b)b.children.splice(b.children.indexOf(d),1);else throw Error(d+"is not a child of "+b);b.va()};b.va=function(){0<b.children.length&&(b.ba=0,b.aa=0,b.children.forEach(function(d){d.x+d.width>b.ba&&(b.ba=d.x+d.width);d.y+d.height>b.aa&&(b.aa=d.y+d.height)}),b.width=b.ba,b.height=b.aa)};c.b.f(b);a&&Array.prototype.slice.call(arguments).forEach(function(d){b.f(d)});
return b};c.rb=function(a,b,d,f,k,e,g){var h={};m(h);h.ka=!1;h.width=a||32;h.height=b||32;h.fillStyle=d||"red";h.strokeStyle=f||"none";h.lineWidth=k||0;h.x=e||0;h.y=g||0;c.b.f(h);h.m=function(l){l.strokeStyle=h.strokeStyle;l.lineWidth=h.lineWidth;l.fillStyle=h.fillStyle;l.beginPath();l.rect(-h.width*h.C,-h.height*h.D,h.width,h.height);!0===h.ka?l.clip():("none"!==h.strokeStyle&&l.stroke(),"none"!==h.fillStyle&&l.fill())};return h};c.ab=function(a,b,d,f,k,e){var g={};m(g);g.ka=!1;g.width=a||32;g.height=
a||32;g.fillStyle=b||"red";g.strokeStyle=d||"none";g.lineWidth=f||"none";g.x=k||0;g.y=e||0;c.b.f(g);u(g);g.m=function(h){h.strokeStyle=g.strokeStyle;h.lineWidth=g.lineWidth;h.fillStyle=g.fillStyle;h.beginPath();h.arc(g.R+-g.ea*g.C,g.R+-g.ea*g.D,g.R,0,2*Math.PI,!1);!0===g.ka?h.clip():("none"!==g.strokeStyle&&h.stroke(),"none"!==g.fillStyle&&h.fill())};return g};c.line=function(a,b,d,f,k,e){var g={};m(g);d||0===d||(d=0);f||0===f||(f=0);k||0===k||(k=32);e||0===e||(e=32);g.Da=d;g.Ea=f;g.Fa=k;g.Ga=e;g.strokeStyle=
a||"red";g.lineWidth=b||1;g.lineJoin="round";c.b.f(g);g.m=function(h){h.strokeStyle=g.strokeStyle;h.lineWidth=g.lineWidth;h.lineJoin=g.lineJoin;h.beginPath();h.moveTo(g.Da,g.Ea);h.lineTo(g.Fa,g.Ga);"none"!==g.strokeStyle&&h.stroke();"none"!==g.fillStyle&&h.fill()};return g};c.text=function(a,b,d,f,k){var e={};m(e);e.content=a||"Hello!";e.font=b||"12px sans-serif";e.fillStyle=d||"red";e.textBaseline="top";Object.defineProperties(e,{width:{get:function(){return c.canvas.da.measureText(e.content).width},
enumerable:!0,configurable:!0},height:{get:function(){return c.canvas.da.measureText("M").width},enumerable:!0,configurable:!0}});c.b.f(e);e.x=f||0;e.y=k||0;e.m=function(g){g.strokeStyle=e.strokeStyle;g.lineWidth=e.lineWidth;g.fillStyle=e.fillStyle;0===e.width&&(e.width=g.measureText(e.content).width);0===e.height&&(e.height=g.measureText("M").width);g.translate(-e.width*e.C,-e.height*e.D);g.font=e.font;g.textBaseline=e.textBaseline;g.fillText(e.content,0,0)};return e};c.frame=function(a,b,d,f,k){var e=
{};e.image=a;e.x=b;e.y=d;e.width=f;e.height=k;return e};c.frames=function(a,b,d,f){var k={};k.image=a;k.data=b;k.width=d;k.height=f;return k};c.cb=function(a,b,d,f){var k=c.a[a].source,e=[],g=k.width/b;k=k.height/d*g;for(var h=0;h<k;h++){var l=h%g*b;var n=Math.floor(h/g)*d;f&&0<f&&(l+=f+f*h%g,n+=f+f*Math.floor(h/g));e.push([l,n])}return c.frames(a,e,b,d)};c.Va=function(a){var b={};if(void 0===a)throw Error("Sprites require a source");m(b);b.frames=[];b.loop=!0;b.ra=0;b.Ta=function(d){if(d.image)if(d.image&&
!d.data){if(!(c.a[d.image].source instanceof Image))throw Error(d.image+" is not an image file");b.source=c.a[d.image].source;b.F=d.x;b.G=d.y;b.width=d.width;b.height=d.height;b.T=d.width;b.S=d.height}else d.image&&d.data&&(b.source=c.a[d.image].source,b.frames=d.data,b.F=b.frames[0][0],b.G=b.frames[0][1],b.width=d.width,b.height=d.height,b.T=d.width,b.S=d.height);else d instanceof Array?(b.frames=d,b.source=c.a[d[0]].source,b.F=c.a[d[0]].frame.x,b.G=c.a[d[0]].frame.y,b.width=c.a[d[0]].frame.w,b.height=
c.a[d[0]].frame.o,b.T=c.a[d[0]].frame.w,b.S=c.a[d[0]].frame.o):(b.v=c.a[d],b.source=b.v.source,b.F=b.v.frame.x,b.G=b.v.frame.y,b.width=b.v.frame.w,b.height=b.v.frame.o,b.T=b.v.frame.w,b.S=b.v.frame.o)};b.Ta(a);b.B=function(d){if(0<b.frames.length)b.frames[0]instanceof Array?(b.F=b.frames[d][0],b.G=b.frames[d][1]):c.a[b.frames[d]].frame&&(b.source=c.a[b.frames[d]].source,b.F=c.a[b.frames[d]].frame.x,b.G=c.a[b.frames[d]].frame.y,b.T=c.a[b.frames[d]].frame.w,b.S=c.a[b.frames[d]].frame.o,b.width=c.a[b.frames[d]].frame.w,
b.height=c.a[b.frames[d]].frame.o),b.ra=d;else throw Error("Frame number "+d+"doesn't exist");};b.x=0;b.y=0;0<b.frames.length&&(c.Ba(b),Object.defineProperty(b,"currentFrame",{get:function(){return b.ra},enumerable:!1,configurable:!1}));c.b.f(b);b.m=function(d){d.drawImage(b.source,b.F,b.G,b.T,b.S,-b.width*b.C,-b.height*b.D,b.width,b.height)};return b};c.button=function(a){a=c.Va(a);a.oa="button";B(a);return a};c.image=function(a){return c.a[a]};c.json=function(a){return c.a[a]};c.Ba=function(a){function b(p){f();
g=p[0];h=p[1];e=h-g;0===g&&(e+=1,k+=1);1===e&&(e=2,k+=1);a.ia||(a.ia=12);p=1E3/a.ia;a.B(g);n||(l=setInterval(d.bind(this),p),n=!0)}function d(){k<e?(a.B(a.Ka+1),k+=1):a.loop&&(a.B(g),k=1)}function f(){void 0!==l&&!0===n&&(n=!1,e=h=g=k=0,clearInterval(l))}var k=0,e=0,g=0,h=0,l=void 0,n=!1;a.show=function(p){f();"string"!==typeof p?a.B(p):a.B(a.frames.indexOf(p))};a.play=function(){b([0,a.frames.length-1])};a.stop=function(){f();a.B(a.Ka)};a.lb=n;a.kb=b};c.m=function(a,b){function d(e){if(e.visible&&
e.h<a.width+e.width&&e.h+e.width>=-e.width&&e.i<a.height+e.height&&e.i+e.height>=-e.height){f.save();c.Na?(e.ya=void 0!==e.U?(e.x-e.U)*b+e.U:e.x,e.za=void 0!==e.V?(e.y-e.V)*b+e.V:e.y):(e.ya=e.x,e.za=e.y);f.translate(e.ya+e.width*e.C,e.za+e.height*e.D);f.globalAlpha=e.alpha;f.rotate(e.rotation);f.scale(e.Ra,e.Sa);e.Ua&&(f.shadowColor=e.shadowColor,f.shadowOffsetX=e.shadowOffsetX,f.shadowOffsetY=e.shadowOffsetY,f.shadowBlur=e.shadowBlur);e.ua&&(f.globalCompositeOperation=e.ua);e.m&&e.m(f);if(e.children&&
0<e.children.length){f.translate(-e.width*e.C,-e.height*e.D);for(var g=0;g<e.children.length;g++)d(e.children[g])}f.restore()}}var f=a.da;f.clearRect(0,0,a.width,a.height);for(var k=0;k<c.b.children.length;k++)d(c.b.children[k])};c.a={pa:0,loaded:0,Ma:["png","jpg","gif","webp"],La:["ttf","otf","ttc","woff"],Ca:["mp3","ogg","wav","webm"],Oa:["json"],Aa:void 0,load:function(a){console.log("Loading assets...");var b=this;b.pa=a.length;a.forEach(function(d){var f=d.split(".").pop();if(-1!==b.Ma.indexOf(f)){var k=
new Image;k.addEventListener("load",function(){k.name=d;b[k.name]={source:k,frame:{x:0,y:0,w:k.width,o:k.height}};b.P()},!1);k.src=d}else if(-1!==b.La.indexOf(f)){f=d.split("/").pop().split(".")[0];var e=document.createElement("style");e.appendChild(document.createTextNode("@font-face {font-family: '"+f+"'; src: url('"+d+"');}"));document.head.appendChild(e);b.P()}else if(-1!==b.Ca.indexOf(f))f=c.jb(d,b.P.bind(b)),f.name=d,b[f.name]=f;else if(-1!==b.Oa.indexOf(f)){var g=new XMLHttpRequest,h={};g.open("GET",
d,!0);g.addEventListener("readystatechange",function(){200===g.status&&4===g.readyState&&(h=JSON.parse(g.responseText),h.name=d,b[h.name]=h,h.frames?b.Ja(h,d):b.P())});g.send()}else console.log("File type not recognized: "+d)})},Ja:function(a,b){var d=this,f=b.replace(/[^\/]*$/,""),k=new Image;k.addEventListener("load",function(){d[f+a.Pa.image]={source:k,frame:{x:0,y:0,w:k.width,o:k.height}};Object.keys(a.frames).forEach(function(e){d[e]=a.frames[e];d[e].source=k});d.P()},!1);k.src=f+a.Pa.image},
P:function(){this.loaded+=1;console.log(this.loaded);this.pa===this.loaded&&(this.loaded=this.pa=0,this.Aa())}};c.gb=q;c.ib=m;return c};